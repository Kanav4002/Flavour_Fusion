<!DOCTYPE html>
<html lang="en">
<head>
    <title>FlavorFusion - Recipe Sharing Platform</title>
    <%- include('partials/head') %>
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/home.css">
</head>
<body>
    <%- include('partials/header') %>

    <main>
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-content">
                <h1>Discover, Create, and Share Culinary Delights</h1>
                <p>Join our community of food enthusiasts and embark on a flavorful journey</p>
                <div class="hero-buttons">
                    <a href="/recipes" class="btn btn-primary">Explore Recipes</a>
                    <a href="/add-recipe" class="btn btn-secondary">Share Your Recipe</a>
                </div>
            </div>
            <div class="hero-overlay"></div>
        </section>

        <!-- Featured Categories -->
        <section class="featured-categories">
            <div class="section-header">
                <h2>Explore Categories</h2>
                <p>Discover recipes by cuisine type</p>
            </div>
            <div class="categories-grid">
                <div class="category-card">
                    <div class="category-image">
                        <img src="/images/italian.avif" alt="Italian Cuisine">
                    </div>
                    <h3>Italian</h3>
                </div>
                <div class="category-card">
                    <div class="category-image">
                        <img src="/images/mexican.avif" alt="Mexican Cuisine">
                    </div>
                    <h3>Mexican</h3>
                </div>
                <div class="category-card">
                    <div class="category-image">
                        <img src="/images/mediterranean.avif" alt="Mediterranean Cuisine">
                    </div>
                    <h3>Mediterranean</h3>
                </div>
                <div class="category-card">
                    <div class="category-image">
                        <img src="/images/indian.avif" alt="Indian Cuisine">
                    </div>
                    <h3>Indian</h3>
                </div>
                <div class="category-card">
                    <div class="category-image">
                        <img src="/images/chinese.avif" alt="Chinese Cuisine">
                    </div>
                    <h3>Chinese</h3>
                </div>
                <div class="category-card">
                  <div class="category-image">
                      <img src="/images/japanese.avif" alt="Japanese Cuisine">
                  </div>
                  <h3>Japanese</h3>
              </div>
              <div class="category-card">
                <div class="category-image">
                    <img src="/images/spanish.avif" alt="Spanish Cuisine">
                </div>
                <h3>Spanish</h3>
            </div>
            <div class="category-card">
              <div class="category-image">
                  <img src="/images/thai.avif" alt="Thai Cuisine">
              </div>
              <h3>Thai</h3>
          </div>
            </div>
        </section>

        <!-- Recipe of the Day -->
        <section class="recipe-of-day">
            <div class="section-header">
                <h2>Recipe of the Day</h2>
                <p>Try something new today!</p>
            </div>
            <div class="recipe-day-container">
                <div class="recipe-day-image">
                    <img src="https://source.unsplash.com/random/800x600?cooking" alt="Recipe of the Day">
                </div>
                <div class="recipe-day-content">
                    <div class="recipe-day-badge">Featured</div>
                    <h3 id="featuredRecipeTitle">Loading...</h3>
                    <div class="recipe-day-meta">
                        <span><i class="fas fa-clock"></i> <span id="featuredRecipeTime">-- mins</span></span>
                        <span><i class="fas fa-utensils"></i> <span id="featuredRecipeType">--</span></span>
                    </div>
                    <p id="featuredRecipeDesc">Loading recipe details...</p>
                    <a href="#" id="featuredRecipeLink" class="btn btn-primary">View Recipe</a>
                </div>
            </div>
        </section>

        <!-- How It Works -->
        <section class="how-it-works">
            <div class="section-header">
                <h2>How FlavorFusion Works</h2>
                <p>Your journey to culinary excellence in three simple steps</p>
            </div>
            <div class="steps-container">
                <div class="step-card">
                    <div class="step-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <h3>Discover</h3>
                    <p>Explore thousands of recipes from around the world, filter by cuisine, dietary needs, or ingredients you have.</p>
                </div>
                <div class="step-card">
                    <div class="step-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <h3>Create</h3>
                    <p>Follow detailed instructions or share your own culinary masterpieces with our community.</p>
                </div>
                <div class="step-card">
                    <div class="step-icon">
                        <i class="fas fa-share-alt"></i>
                    </div>
                    <h3>Share</h3>
                    <p>Rate recipes, leave comments, and build your personal collection of favorites.</p>
                </div>
            </div>
        </section>

        <!-- Latest Recipes -->
        <section class="latest-recipes">
            <div class="section-header">
                <h2>Latest Recipes</h2>
                <p>Fresh from our community kitchen</p>
            </div>
            <div class="recipes-grid" id="latestRecipesContainer">
                <!-- Recipe cards will be loaded dynamically -->
                <div class="recipe-card skeleton">
                    <div class="recipe-image skeleton-img"></div>
                    <div class="recipe-content">
                        <h3 class="skeleton-text"></h3>
                        <p class="skeleton-text"></p>
                        <div class="recipe-meta skeleton-text"></div>
                    </div>
                </div>
                <div class="recipe-card skeleton">
                    <div class="recipe-image skeleton-img"></div>
                    <div class="recipe-content">
                        <h3 class="skeleton-text"></h3>
                        <p class="skeleton-text"></p>
                        <div class="recipe-meta skeleton-text"></div>
                    </div>
                </div>
                <div class="recipe-card skeleton">
                    <div class="recipe-image skeleton-img"></div>
                    <div class="recipe-content">
                        <h3 class="skeleton-text"></h3>
                        <p class="skeleton-text"></p>
                        <div class="recipe-meta skeleton-text"></div>
                    </div>
                </div>
            </div>
            <div class="view-all-container">
                <a href="/recipes" class="btn btn-secondary">View All Recipes</a>
            </div>
        </section>

        <!-- Testimonials -->
        <section class="testimonials">
            <div class="section-header">
                <h2>What Our Community Says</h2>
                <p>Join thousands of happy home chefs</p>
            </div>
            <div class="testimonials-container">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>"FlavorFusion transformed my cooking experience! I've discovered so many amazing recipes and even gained confidence to share my own creations."</p>
                    </div>
                    <div class="testimonial-author">
                        <img src="https://randomuser.me/api/portraits/women/45.jpg" alt="Sarah Johnson">
                        <div>
                            <h4>Sarah Johnson</h4>
                            <p>Home Cook</p>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>"The meal planner feature has been a game-changer for my family. No more last-minute dinner stress - everything is organized and delicious!"</p>
                    </div>
                    <div class="testimonial-author">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Michael Chen">
                        <div>
                            <h4>Michael Chen</h4>
                            <p>Food Enthusiast</p>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>"As a professional chef, I'm impressed by the quality of recipes shared here. The community feedback has even helped me refine some of my signature dishes."</p>
                    </div>
                    <div class="testimonial-author">
                        <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="Elena Rodriguez">
                        <div>
                            <h4>Elena Rodriguez</h4>
                            <p>Professional Chef</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="cta-section">
            <div class="cta-content">
                <h2>Ready to Start Your Culinary Journey?</h2>
                <p>Join thousands of food enthusiasts sharing recipes, tips, and culinary adventures.</p>
                <a href="/signup" class="btn btn-primary">Sign Up Now</a>
            </div>
        </section>
    </main>

    <%- include('partials/footer') %>

    <script src="/js/main.js"></script>
    <script>
        // Recipe of the day functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Fetch recipe of the day
            fetch('/api/recipe-of-day')
                .then(response => response.json())
                .then(recipe => {
                    if (recipe) {
                        document.getElementById('featuredRecipeTitle').textContent = recipe.title;
                        document.getElementById('featuredRecipeTime').textContent = recipe.prepTime + ' mins';
                        document.getElementById('featuredRecipeType').textContent = recipe.dietaryType || 'All';
                        document.getElementById('featuredRecipeDesc').textContent = recipe.description;
                        document.getElementById('featuredRecipeLink').href = '/recipe/' + recipe.id;
                        
                        // If recipe has an image, update the src
                        if (recipe.image) {
                            const recipeImg = document.querySelector('.recipe-day-image img');
                            recipeImg.src = recipe.image;
                            recipeImg.alt = recipe.title;
                        }
                    }
                })
                .catch(error => {
                    console.error('Error fetching recipe of the day:', error);
                });
                
            // Fetch latest recipes
            fetch('/api/recipes')
                .then(response => response.json())
                .then(data => {
                    const recipesContainer = document.getElementById('latestRecipesContainer');
                    
                    // Clear skeleton loaders
                    recipesContainer.innerHTML = '';
                    
                    // Get the latest 3 recipes
                    const latestRecipes = data.recipes
                        .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                        .slice(0, 3);
                    
                    // Add recipe cards
                    latestRecipes.forEach(recipe => {
                        recipesContainer.innerHTML += `
                            <div class="recipe-card">
                                <div class="recipe-image">
                                    <img src="${recipe.image || 'https://source.unsplash.com/random/400x300?food'}" alt="${recipe.title}">
                                </div>
                                <div class="recipe-content">
                                    <h3>${recipe.title}</h3>
                                    <p>${recipe.description || 'Delicious homemade recipe'}</p>
                                    <div class="recipe-meta">
                                        <span><i class="fas fa-clock"></i> ${recipe.prepTime} mins</span>
                                        <span><i class="fas fa-utensils"></i> ${recipe.dietaryType || 'All'}</span>
                                    </div>
                                    <a href="/recipe/${recipe.id}" class="btn btn-small">View Recipe</a>
                                </div>
                            </div>
                        `;
                    });
                    
                    // If no recipes found
                    if (latestRecipes.length === 0) {
                        recipesContainer.innerHTML = '<p class="no-recipes">No recipes found. Be the first to share a recipe!</p>';
                    }
                })
                .catch(error => {
                    console.error('Error fetching latest recipes:', error);
                });
        });
    </script>
</body>
</html> 